"use strict";var constants=require("./constants");var formatUrl=require("./format");var getOptions=require("./options");var objUtils=require("./util/object");var parseUrl=require("./parse");var relateUrl=require("./relate");function RelateUrl(b,a){this.options=getOptions(a,{defaultPorts:{ftp:21,http:80,https:443},directoryIndexes:["index.html"],ignore_www:false,output:RelateUrl.SHORTEST,rejectedSchemes:["data","javascript","mailto"],removeAuth:false,removeDirectoryIndexes:true,removeEmptyQueries:false,removeRootTrailingSlash:true,schemeRelative:true,site:undefined,slashesDenoteHost:true});this.from=parseUrl.from(b,this.options,null)}RelateUrl.prototype.relate=function(c,b,a){if(objUtils.isPlainObject(b)){a=b;b=c;c=null}else{if(!b){b=c;c=null}}a=getOptions(a,this.options);c=c||a.site;c=parseUrl.from(c,a,this.from);if(!c||!c.href){throw new Error("from value not defined.")}else{if(c.extra.hrefInfo.minimumPathOnly){throw new Error("from value supplied is not absolute: "+c.href)}}b=parseUrl.to(b,a);if(b.valid===false){return b.href}b=relateUrl(c,b,a);b=formatUrl(b,a);return b};RelateUrl.relate=function(c,b,a){return new RelateUrl().relate(c,b,a)};objUtils.shallowMerge(RelateUrl,constants);module.exports=RelateUrl;