"use strict";var findRelation=require("./findRelation");var objUtils=require("../util/object");var pathUtils=require("../util/path");function absolutize(c,b,a){findRelation.upToPath(c,b,a);if(c.extra.relation.minimumScheme){c.scheme=b.scheme}if(c.extra.relation.minimumAuth){c.auth=b.auth}if(c.extra.relation.minimumHost){c.host=objUtils.clone(b.host)}if(c.extra.relation.minimumPort){copyPort(c,b)}if(c.extra.relation.minimumScheme){copyPath(c,b)}findRelation.pathOn(c,b,a);if(c.extra.relation.minimumResource){copyResource(c,b)}if(c.extra.relation.minimumQuery){c.query=objUtils.clone(b.query)}if(c.extra.relation.minimumHash){c.hash=b.hash}}function copyPath(d,b){if(d.extra.relation.maximumHost||!d.extra.hrefInfo.minimumResourceOnly){var c=d.path.absolute.array;var a="/";if(c){if(d.extra.hrefInfo.minimumPathOnly&&d.path.absolute.string.indexOf("/")!==0){c=b.path.absolute.array.concat(c)}c=pathUtils.resolveDotSegments(c);a+=pathUtils.join(c)}else{c=[]}d.path.absolute.array=c;d.path.absolute.string=a}else{d.path=objUtils.clone(b.path)}}function copyPort(b,a){b.port=a.port;b.extra.portIsDefault=a.extra.portIsDefault}function copyResource(b,a){b.resource=a.resource;b.extra.resourceIsIndex=a.extra.resourceIsIndex}module.exports=absolutize;