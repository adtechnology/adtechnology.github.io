var npm=require("./npm.js");var mapToRegistry=require("./utils/map-to-registry.js");var npa=require("npm-package-arg");module.exports=deprecate;deprecate.usage="npm deprecate <pkg>[@<version>] <message>";deprecate.completion=function(b,a){if(b.conf.argv.remain.length>2){return a()}var c="/-/by-user/";mapToRegistry(c,npm.config,function(g,d,f){if(g){return a(g)}if(!(f&&f.username)){return a()}var e={timeout:60000,auth:f};npm.registry.get(d+f.username,e,function(i,h){if(i){return a()}console.error(h);return a(null,h[f.username])})})};function deprecate(d,a){var c=d[0];var f=d[1];if(f===undefined){return a("Usage: "+deprecate.usage)}var e=npa(c);var b=e.rawSpec===""?"*":e.fetchSpec;mapToRegistry(e.name,npm.config,function(j,h,g){if(j){return a(j)}var i={version:b,message:f,auth:g};npm.registry.deprecate(h,i,a)})};