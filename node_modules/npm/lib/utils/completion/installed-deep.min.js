module.exports=installedDeep;var npm=require("../../npm.js");var readInstalled=require("read-installed");function installedDeep(a,f){var i;var b;var g=npm.config.get("depth");var c={depth:g,dev:true};if(npm.config.get("global")){i=[];h()}else{readInstalled(npm.prefix,c,function(k,j){i=e(j||{});h()})}readInstalled(npm.config.get("prefix"),c,function(k,j){b=e(j||{});h()});function d(j,k){if(j.realName&&k){if(k[j.realName]){return k}k[j.realName]=true}if(!k){k={}}Object.keys(j.dependencies||{}).forEach(function(l){d(j.dependencies[l],k)});return k}function e(j){return Object.keys(d(j))}function h(){if(!i||!b){return}if(!npm.config.get("global")){b=b.map(function(k){return[k,"-g"]})}var j=i.concat(b);return f(null,j)}};