module.exports=spawn;var _spawn=require("child_process").spawn;var EventEmitter=require("events").EventEmitter;var npwr=require("./no-progress-while-running.js");function willCmdOutput(b){if(b==="inherit"){return true}if(!Array.isArray(b)){return false}for(var a=1;a<=2;++a){if(b[a]==="inherit"){return true}if(b[a]===1||b[a]===2){return true}}return false}function spawn(e,c,b){var d=willCmdOutput(b&&b.stdio);if(d){npwr.startRunning()}var a=_spawn(e,c,b);var f=new EventEmitter();a.on("error",function(g){if(d){npwr.stopRunning()}g.file=e;f.emit("error",g)}).on("close",function(g,h){if(d){npwr.stopRunning()}if(g===127){var i=new Error("spawn ENOENT");i.code="ENOENT";i.errno="ENOENT";i.syscall="spawn";i.file=e;f.emit("error",i)}else{f.emit("close",g,h)}});f.stdin=a.stdin;f.stdout=a.stdout;f.stderr=a.stderr;f.kill=function(g){return a.kill(g)};return f};