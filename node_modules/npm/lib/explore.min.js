module.exports=explore;explore.usage="npm explore <pkg> [ -- <command>]";explore.completion=require("./utils/completion/installed-shallow.js");var npm=require("./npm.js");var spawn=require("./utils/spawn");var path=require("path");var fs=require("graceful-fs");var isWindowsShell=require("./utils/is-windows-shell.js");var escapeExecPath=require("./utils/escape-exec-path.js");var escapeArg=require("./utils/escape-arg.js");var output=require("./utils/output.js");function explore(h,d){if(h.length<1||!h[0]){return d(explore.usage)}var b=h.shift();var i=path.resolve(npm.dir,b);var a={cwd:i,stdio:"inherit"};var g=[];if(h){if(isWindowsShell){var e=escapeExecPath(h.shift());var c=[e].concat(h.map(escapeArg));a.windowsVerbatimArguments=true;g=["/d","/s","/c"].concat(c)}else{g.unshift("-c");g=["-c",h.map(escapeArg).join(" ").trim()]}}var f=npm.config.get("shell");fs.stat(i,function(l,k){if(l||!k.isDirectory()){return d(new Error("It doesn't look like "+b+" is installed."))}if(!g.length){output("\nExploring "+i+"\nType 'exit' or ^D when finished\n")}var j=spawn(f,g,a);j.on("close",function(m){if(!g.length){return d()}d(m)})})};