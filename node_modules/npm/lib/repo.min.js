module.exports=repo;repo.usage="npm repo [<pkg>]";var openUrl=require("./utils/open-url");var hostedGitInfo=require("hosted-git-info");var url_=require("url");var fetchPackageMetadata=require("./fetch-package-metadata.js");repo.completion=function(b,a){a()};function repo(b,a){var c=b.length?b[0]:".";fetchPackageMetadata(c,".",{fullMetadata:true},function(f,e){if(f){return a(f)}getUrlAndOpen(e,a)})}function getUrlAndOpen(f,a){var c=f.repository;if(!c){return a(new Error("no repository"))}var e=hostedGitInfo.fromUrl(c.url);var b=e?e.browse():unknownHostedUrl(c.url);if(!b){return a(new Error("no repository: could not get url"))}openUrl(b,"repository available at the following URL",a)}function unknownHostedUrl(b){try{var a=b.indexOf("@");if(a!==-1){b=b.slice(a+1).replace(/:([^\d]+)/,"/$1")}b=url_.parse(b);var d=b.protocol==="https:"?"https:":"http:";return d+"//"+(b.host||"")+b.path.replace(/\.git$/,"")}catch(c){}};