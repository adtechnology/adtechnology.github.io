module.exports=adduser;var log=require("npmlog");var npm=require("./npm.js");var usage=require("./utils/usage");var crypto;try{crypto=require("crypto")}catch(ex){}adduser.usage=usage("adduser","npm adduser [--registry=url] [--scope=@orgname] [--auth-type=legacy] [--always-auth]");function adduser(g,d){if(!crypto){return d(new Error("You must compile node with ssl support to use the adduser feature"))}var a=npm.config.get("registry");var j=npm.config.get("scope");var i=npm.config.getCredentialsByURI(npm.config.get("registry"));if(j){var b=npm.config.get(j+":registry");var h=npm.config.get("registry","cli");if(b&&!h){a=b}}log.disableProgress();try{var c=require("./auth/"+npm.config.get("auth-type"))}catch(f){return d(new Error("no such auth module"))}c.login(i,a,j,function(e,k){if(e){return d(e)}npm.config.del("_token","user");if(j){npm.config.set(j+":registry",a,"user")}npm.config.setCredentialsByURI(a,k);npm.config.save("user",d)})};