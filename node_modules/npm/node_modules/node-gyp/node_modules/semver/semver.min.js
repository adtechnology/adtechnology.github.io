exports=module.exports=SemVer;var debug;if(typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)){debug=function(){var a=Array.prototype.slice.call(arguments,0);a.unshift("SEMVER");console.log.apply(console,a)}}else{debug=function(){}}exports.SEMVER_SPEC_VERSION="2.0.0";var MAX_LENGTH=256;var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var re=exports.re=[];var src=exports.src=[];var R=0;var NUMERICIDENTIFIER=R++;src[NUMERICIDENTIFIER]="0|[1-9]\\d*";var NUMERICIDENTIFIERLOOSE=R++;src[NUMERICIDENTIFIERLOOSE]="[0-9]+";var NONNUMERICIDENTIFIER=R++;src[NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var MAINVERSION=R++;src[MAINVERSION]="("+src[NUMERICIDENTIFIER]+")\\.("+src[NUMERICIDENTIFIER]+")\\.("+src[NUMERICIDENTIFIER]+")";var MAINVERSIONLOOSE=R++;src[MAINVERSIONLOOSE]="("+src[NUMERICIDENTIFIERLOOSE]+")\\.("+src[NUMERICIDENTIFIERLOOSE]+")\\.("+src[NUMERICIDENTIFIERLOOSE]+")";var PRERELEASEIDENTIFIER=R++;src[PRERELEASEIDENTIFIER]="(?:"+src[NUMERICIDENTIFIER]+"|"+src[NONNUMERICIDENTIFIER]+")";var PRERELEASEIDENTIFIERLOOSE=R++;src[PRERELEASEIDENTIFIERLOOSE]="(?:"+src[NUMERICIDENTIFIERLOOSE]+"|"+src[NONNUMERICIDENTIFIER]+")";var PRERELEASE=R++;src[PRERELEASE]="(?:-("+src[PRERELEASEIDENTIFIER]+"(?:\\."+src[PRERELEASEIDENTIFIER]+")*))";var PRERELEASELOOSE=R++;src[PRERELEASELOOSE]="(?:-?("+src[PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+src[PRERELEASEIDENTIFIERLOOSE]+")*))";var BUILDIDENTIFIER=R++;src[BUILDIDENTIFIER]="[0-9A-Za-z-]+";var BUILD=R++;src[BUILD]="(?:\\+("+src[BUILDIDENTIFIER]+"(?:\\."+src[BUILDIDENTIFIER]+")*))";var FULL=R++;var FULLPLAIN="v?"+src[MAINVERSION]+src[PRERELEASE]+"?"+src[BUILD]+"?";src[FULL]="^"+FULLPLAIN+"$";var LOOSEPLAIN="[v=\\s]*"+src[MAINVERSIONLOOSE]+src[PRERELEASELOOSE]+"?"+src[BUILD]+"?";var LOOSE=R++;src[LOOSE]="^"+LOOSEPLAIN+"$";var GTLT=R++;src[GTLT]="((?:<|>)?=?)";var XRANGEIDENTIFIERLOOSE=R++;src[XRANGEIDENTIFIERLOOSE]=src[NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";var XRANGEIDENTIFIER=R++;src[XRANGEIDENTIFIER]=src[NUMERICIDENTIFIER]+"|x|X|\\*";var XRANGEPLAIN=R++;src[XRANGEPLAIN]="[v=\\s]*("+src[XRANGEIDENTIFIER]+")(?:\\.("+src[XRANGEIDENTIFIER]+")(?:\\.("+src[XRANGEIDENTIFIER]+")(?:"+src[PRERELEASE]+")?"+src[BUILD]+"?)?)?";var XRANGEPLAINLOOSE=R++;src[XRANGEPLAINLOOSE]="[v=\\s]*("+src[XRANGEIDENTIFIERLOOSE]+")(?:\\.("+src[XRANGEIDENTIFIERLOOSE]+")(?:\\.("+src[XRANGEIDENTIFIERLOOSE]+")(?:"+src[PRERELEASELOOSE]+")?"+src[BUILD]+"?)?)?";var XRANGE=R++;src[XRANGE]="^"+src[GTLT]+"\\s*"+src[XRANGEPLAIN]+"$";var XRANGELOOSE=R++;src[XRANGELOOSE]="^"+src[GTLT]+"\\s*"+src[XRANGEPLAINLOOSE]+"$";var LONETILDE=R++;src[LONETILDE]="(?:~>?)";var TILDETRIM=R++;src[TILDETRIM]="(\\s*)"+src[LONETILDE]+"\\s+";re[TILDETRIM]=new RegExp(src[TILDETRIM],"g");var tildeTrimReplace="$1~";var TILDE=R++;src[TILDE]="^"+src[LONETILDE]+src[XRANGEPLAIN]+"$";var TILDELOOSE=R++;src[TILDELOOSE]="^"+src[LONETILDE]+src[XRANGEPLAINLOOSE]+"$";var LONECARET=R++;src[LONECARET]="(?:\\^)";var CARETTRIM=R++;src[CARETTRIM]="(\\s*)"+src[LONECARET]+"\\s+";re[CARETTRIM]=new RegExp(src[CARETTRIM],"g");var caretTrimReplace="$1^";var CARET=R++;src[CARET]="^"+src[LONECARET]+src[XRANGEPLAIN]+"$";var CARETLOOSE=R++;src[CARETLOOSE]="^"+src[LONECARET]+src[XRANGEPLAINLOOSE]+"$";var COMPARATORLOOSE=R++;src[COMPARATORLOOSE]="^"+src[GTLT]+"\\s*("+LOOSEPLAIN+")$|^$";var COMPARATOR=R++;src[COMPARATOR]="^"+src[GTLT]+"\\s*("+FULLPLAIN+")$|^$";var COMPARATORTRIM=R++;src[COMPARATORTRIM]="(\\s*)"+src[GTLT]+"\\s*("+LOOSEPLAIN+"|"+src[XRANGEPLAIN]+")";re[COMPARATORTRIM]=new RegExp(src[COMPARATORTRIM],"g");var comparatorTrimReplace="$1$2$3";var HYPHENRANGE=R++;src[HYPHENRANGE]="^\\s*("+src[XRANGEPLAIN]+")\\s+-\\s+("+src[XRANGEPLAIN]+")\\s*$";var HYPHENRANGELOOSE=R++;src[HYPHENRANGELOOSE]="^\\s*("+src[XRANGEPLAINLOOSE]+")\\s+-\\s+("+src[XRANGEPLAINLOOSE]+")\\s*$";var STAR=R++;src[STAR]="(<|>)?=?\\s*\\*";for(var i=0;i<R;i++){debug(i,src[i]);if(!re[i]){re[i]=new RegExp(src[i])}}exports.parse=parse;function parse(a,d){if(a instanceof SemVer){return a}if(typeof a!=="string"){return null}if(a.length>MAX_LENGTH){return null}var b=d?re[LOOSE]:re[FULL];if(!b.test(a)){return null}try{return new SemVer(a,d)}catch(c){return null}}exports.valid=valid;function valid(a,c){var b=parse(a,c);return b?b.version:null}exports.clean=clean;function clean(a,c){var b=parse(a.trim().replace(/^[=v]+/,""),c);return b?b.version:null}exports.SemVer=SemVer;function SemVer(b,c){if(b instanceof SemVer){if(b.loose===c){return b}else{b=b.version}}else{if(typeof b!=="string"){throw new TypeError("Invalid Version: "+b)}}if(b.length>MAX_LENGTH){throw new TypeError("version is longer than "+MAX_LENGTH+" characters")}if(!(this instanceof SemVer)){return new SemVer(b,c)}debug("SemVer",b,c);this.loose=c;var a=b.trim().match(c?re[LOOSE]:re[FULL]);if(!a){throw new TypeError("Invalid Version: "+b)}this.raw=b;this.major=+a[1];this.minor=+a[2];this.patch=+a[3];if(this.major>MAX_SAFE_INTEGER||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>MAX_SAFE_INTEGER||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>MAX_SAFE_INTEGER||this.patch<0){throw new TypeError("Invalid patch version")}if(!a[4]){this.prerelease=[]}else{this.prerelease=a[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var d=+e;if(d>=0&&d<MAX_SAFE_INTEGER){return d}}return e})}this.build=a[5]?a[5].split("."):[];this.format()}SemVer.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;if(this.prerelease.length){this.version+="-"+this.prerelease.join(".")}return this.version};SemVer.prototype.toString=function(){return this.version};SemVer.prototype.compare=function(a){debug("SemVer.compare",this.version,this.loose,a);if(!(a instanceof SemVer)){a=new SemVer(a,this.loose)}return this.compareMain(a)||this.comparePre(a)};SemVer.prototype.compareMain=function(a){if(!(a instanceof SemVer)){a=new SemVer(a,this.loose)}return compareIdentifiers(this.major,a.major)||compareIdentifiers(this.minor,a.minor)||compareIdentifiers(this.patch,a.patch)};SemVer.prototype.comparePre=function(d){if(!(d instanceof SemVer)){d=new SemVer(d,this.loose)}if(this.prerelease.length&&!d.prerelease.length){return -1}else{if(!this.prerelease.length&&d.prerelease.length){return 1}else{if(!this.prerelease.length&&!d.prerelease.length){return 0}}}var f=0;do{var e=this.prerelease[f];var c=d.prerelease[f];debug("prerelease compare",f,e,c);if(e===undefined&&c===undefined){return 0}else{if(c===undefined){return 1}else{if(e===undefined){return -1}else{if(e===c){continue}else{return compareIdentifiers(e,c)}}}}}while(++f)};SemVer.prototype.inc=function(a,b){switch(a){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",b);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",b);break;case"prepatch":this.prerelease.length=0;this.inc("patch",b);this.inc("pre",b);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",b)}this.inc("pre",b);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0]}else{var c=this.prerelease.length;while(--c>=0){if(typeof this.prerelease[c]==="number"){this.prerelease[c]++;c=-2}}if(c===-1){this.prerelease.push(0)}}if(b){if(this.prerelease[0]===b){if(isNaN(this.prerelease[1])){this.prerelease=[b,0]}}else{this.prerelease=[b,0]}}break;default:throw new Error("invalid increment argument: "+a)}this.format();this.raw=this.version;return this};exports.inc=inc;function inc(b,a,e,c){if(typeof(e)==="string"){c=e;e=undefined}try{return new SemVer(b,e).inc(a,c).version}catch(d){return null}}exports.diff=diff;function diff(a,e){if(eq(a,e)){return null}else{var d=parse(a);var c=parse(e);if(d.prerelease.length||c.prerelease.length){for(var b in d){if(b==="major"||b==="minor"||b==="patch"){if(d[b]!==c[b]){return"pre"+b}}}return"prerelease"}for(var b in d){if(b==="major"||b==="minor"||b==="patch"){if(d[b]!==c[b]){return b}}}}}exports.compareIdentifiers=compareIdentifiers;var numeric=/^[0-9]+$/;function compareIdentifiers(d,c){var f=numeric.test(d);var e=numeric.test(c);if(f&&e){d=+d;c=+c}return(f&&!e)?-1:(e&&!f)?1:d<c?-1:d>c?1:0}exports.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(d,c){return compareIdentifiers(c,d)}exports.major=major;function major(b,c){return new SemVer(b,c).major}exports.minor=minor;function minor(b,c){return new SemVer(b,c).minor}exports.patch=patch;function patch(b,c){return new SemVer(b,c).patch}exports.compare=compare;function compare(d,c,e){return new SemVer(d,e).compare(c)}exports.compareLoose=compareLoose;function compareLoose(d,c){return compare(d,c,true)}exports.rcompare=rcompare;function rcompare(d,c,e){return compare(c,d,e)}exports.sort=sort;function sort(a,b){return a.sort(function(d,c){return exports.compare(d,c,b)})}exports.rsort=rsort;function rsort(a,b){return a.sort(function(d,c){return exports.rcompare(d,c,b)})}exports.gt=gt;function gt(d,c,e){return compare(d,c,e)>0}exports.lt=lt;function lt(d,c,e){return compare(d,c,e)<0}exports.eq=eq;function eq(d,c,e){return compare(d,c,e)===0}exports.neq=neq;function neq(d,c,e){return compare(d,c,e)!==0}exports.gte=gte;function gte(d,c,e){return compare(d,c,e)>=0}exports.lte=lte;function lte(d,c,e){return compare(d,c,e)<=0}exports.cmp=cmp;function cmp(d,g,c,f){var e;switch(g){case"===":if(typeof d==="object"){d=d.version}if(typeof c==="object"){c=c.version}e=d===c;break;case"!==":if(typeof d==="object"){d=d.version}if(typeof c==="object"){c=c.version}e=d!==c;break;case"":case"=":case"==":e=eq(d,c,f);break;case"!=":e=neq(d,c,f);break;case">":e=gt(d,c,f);break;case">=":e=gte(d,c,f);break;case"<":e=lt(d,c,f);break;case"<=":e=lte(d,c,f);break;default:throw new TypeError("Invalid operator: "+g)}return e}exports.Comparator=Comparator;function Comparator(a,b){if(a instanceof Comparator){if(a.loose===b){return a}else{a=a.value}}if(!(this instanceof Comparator)){return new Comparator(a,b)}debug("comparator",a,b);this.loose=b;this.parse(a);if(this.semver===ANY){this.value=""}else{this.value=this.operator+this.semver.version}debug("comp",this)}var ANY={};Comparator.prototype.parse=function(b){var c=this.loose?re[COMPARATORLOOSE]:re[COMPARATOR];var a=b.match(c);if(!a){throw new TypeError("Invalid comparator: "+b)}this.operator=a[1];if(this.operator==="="){this.operator=""}if(!a[2]){this.semver=ANY}else{this.semver=new SemVer(a[2],this.loose)}};Comparator.prototype.toString=function(){return this.value};Comparator.prototype.test=function(a){debug("Comparator.test",a,this.loose);if(this.semver===ANY){return true}if(typeof a==="string"){a=new SemVer(a,this.loose)}return cmp(a,this.operator,this.semver,this.loose)};exports.Range=Range;function Range(a,b){if((a instanceof Range)&&a.loose===b){return a}if(!(this instanceof Range)){return new Range(a,b)}this.loose=b;this.raw=a;this.set=a.split(/\s*\|\|\s*/).map(function(c){return this.parseRange(c.trim())},this).filter(function(d){return d.length});if(!this.set.length){throw new TypeError("Invalid SemVer Range: "+a)}this.format()}Range.prototype.format=function(){this.range=this.set.map(function(a){return a.join(" ").trim()}).join("||").trim();return this.range};Range.prototype.toString=function(){return this.range};Range.prototype.parseRange=function(a){var e=this.loose;a=a.trim();debug("range",a,e);var b=e?re[HYPHENRANGELOOSE]:re[HYPHENRANGE];a=a.replace(b,hyphenReplace);debug("hyphen replace",a);a=a.replace(re[COMPARATORTRIM],comparatorTrimReplace);debug("comparator trim",a,re[COMPARATORTRIM]);a=a.replace(re[TILDETRIM],tildeTrimReplace);a=a.replace(re[CARETTRIM],caretTrimReplace);a=a.split(/\s+/).join(" ");var d=e?re[COMPARATORLOOSE]:re[COMPARATOR];var c=a.split(" ").map(function(f){return parseComparator(f,e)}).join(" ").split(/\s+/);if(this.loose){c=c.filter(function(f){return !!f.match(d)})}c=c.map(function(f){return new Comparator(f,e)});return c};exports.toComparators=toComparators;function toComparators(a,b){return new Range(a,b).set.map(function(c){return c.map(function(d){return d.value}).join(" ").trim().split(" ")})}function parseComparator(a,b){debug("comp",a);a=replaceCarets(a,b);debug("caret",a);a=replaceTildes(a,b);debug("tildes",a);a=replaceXRanges(a,b);debug("xrange",a);a=replaceStars(a,b);debug("stars",a);return a}function isX(a){return !a||a.toLowerCase()==="x"||a==="*"}function replaceTildes(a,b){return a.trim().split(/\s+/).map(function(c){return replaceTilde(c,b)}).join(" ")}function replaceTilde(a,c){var b=c?re[TILDELOOSE]:re[TILDE];return a.replace(b,function(f,j,d,g,h){debug("tilde",a,f,j,d,g,h);var e;if(isX(j)){e=""}else{if(isX(d)){e=">="+j+".0.0 <"+(+j+1)+".0.0"}else{if(isX(g)){e=">="+j+"."+d+".0 <"+j+"."+(+d+1)+".0"}else{if(h){debug("replaceTilde pr",h);if(h.charAt(0)!=="-"){h="-"+h}e=">="+j+"."+d+"."+g+h+" <"+j+"."+(+d+1)+".0"}else{e=">="+j+"."+d+"."+g+" <"+j+"."+(+d+1)+".0"}}}}debug("tilde return",e);return e})}function replaceCarets(a,b){return a.trim().split(/\s+/).map(function(c){return replaceCaret(c,b)}).join(" ")}function replaceCaret(a,c){debug("caret",a,c);var b=c?re[CARETLOOSE]:re[CARET];return a.replace(b,function(f,j,d,g,h){debug("caret",a,f,j,d,g,h);var e;if(isX(j)){e=""}else{if(isX(d)){e=">="+j+".0.0 <"+(+j+1)+".0.0"}else{if(isX(g)){if(j==="0"){e=">="+j+"."+d+".0 <"+j+"."+(+d+1)+".0"}else{e=">="+j+"."+d+".0 <"+(+j+1)+".0.0"}}else{if(h){debug("replaceCaret pr",h);if(h.charAt(0)!=="-"){h="-"+h}if(j==="0"){if(d==="0"){e=">="+j+"."+d+"."+g+h+" <"+j+"."+d+"."+(+g+1)}else{e=">="+j+"."+d+"."+g+h+" <"+j+"."+(+d+1)+".0"}}else{e=">="+j+"."+d+"."+g+h+" <"+(+j+1)+".0.0"}}else{debug("no pr");if(j==="0"){if(d==="0"){e=">="+j+"."+d+"."+g+" <"+j+"."+d+"."+(+g+1)}else{e=">="+j+"."+d+"."+g+" <"+j+"."+(+d+1)+".0"}}else{e=">="+j+"."+d+"."+g+" <"+(+j+1)+".0.0"}}}}}debug("caret return",e);return e})}function replaceXRanges(a,b){debug("replaceXRanges",a,b);return a.split(/\s+/).map(function(c){return replaceXRange(c,b)}).join(" ")}function replaceXRange(a,c){a=a.trim();var b=c?re[XRANGELOOSE]:re[XRANGE];return a.replace(b,function(j,n,k,f,e,d){debug("xRange",a,j,n,k,f,e,d);var o=isX(k);var h=o||isX(f);var g=h||isX(e);var l=g;if(n==="="&&l){n=""}if(o){if(n===">"||n==="<"){j="<0.0.0"}else{j="*"}}else{if(n&&l){if(h){f=0}if(g){e=0}if(n===">"){n=">=";if(h){k=+k+1;f=0;e=0}else{if(g){f=+f+1;e=0}}}else{if(n==="<="){n="<";if(h){k=+k+1}else{f=+f+1}}}j=n+k+"."+f+"."+e}else{if(h){j=">="+k+".0.0 <"+(+k+1)+".0.0"}else{if(g){j=">="+k+"."+f+".0 <"+k+"."+(+f+1)+".0"}}}}debug("xRange return",j);return j})}function replaceStars(a,b){debug("replaceStars",a,b);return a.trim().replace(re[STAR],"")}function hyphenReplace(g,l,a,k,h,b,c,m,e,n,j,d,f){if(isX(a)){l=""}else{if(isX(k)){l=">="+a+".0.0"}else{if(isX(h)){l=">="+a+"."+k+".0"}else{l=">="+l}}}if(isX(e)){m=""}else{if(isX(n)){m="<"+(+e+1)+".0.0"}else{if(isX(j)){m="<"+e+"."+(+n+1)+".0"}else{if(d){m="<="+e+"."+n+"."+j+"-"+d}else{m="<="+m}}}}return(l+" "+m).trim()}Range.prototype.test=function(a){if(!a){return false}if(typeof a==="string"){a=new SemVer(a,this.loose)}for(var b=0;b<this.set.length;b++){if(testSet(this.set[b],a)){return true}}return false};function testSet(d,a){for(var b=0;b<d.length;b++){if(!d[b].test(a)){return false}}if(a.prerelease.length){for(var b=0;b<d.length;b++){debug(d[b].semver);if(d[b].semver===ANY){continue}if(d[b].semver.prerelease.length>0){var c=d[b].semver;if(c.major===a.major&&c.minor===a.minor&&c.patch===a.patch){return true}}}return false}return true}exports.satisfies=satisfies;function satisfies(a,b,d){try{b=new Range(b,d)}catch(c){return false}return b.test(a)}exports.maxSatisfying=maxSatisfying;function maxSatisfying(a,b,c){return a.filter(function(d){return satisfies(d,b,c)}).sort(function(e,d){return rcompare(e,d,c)})[0]||null}exports.minSatisfying=minSatisfying;function minSatisfying(a,b,c){return a.filter(function(d){return satisfies(d,b,c)}).sort(function(e,d){return compare(e,d,c)})[0]||null}exports.validRange=validRange;function validRange(a,c){try{return new Range(a,c).range||"*"}catch(b){return null}}exports.ltr=ltr;function ltr(a,b,c){return outside(a,b,"<",c)}exports.gtr=gtr;function gtr(a,b,c){return outside(a,b,">",c)}exports.outside=outside;function outside(k,h,d,f){k=new SemVer(k,f);h=new Range(h,f);var c,b,n,j,m;switch(d){case">":c=gt;b=lte;n=lt;j=">";m=">=";break;case"<":c=lt;b=gte;n=gt;j="<";m="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(k,h,f)){return false}for(var g=0;g<h.set.length;++g){var a=h.set[g];var e=null;var l=null;a.forEach(function(o){if(o.semver===ANY){o=new Comparator(">=0.0.0")}e=e||o;l=l||o;if(c(o.semver,e.semver,f)){e=o}else{if(n(o.semver,l.semver,f)){l=o}}});if(e.operator===j||e.operator===m){return false}if((!l.operator||l.operator===j)&&b(k,l.semver)){return false}else{if(l.operator===m&&n(k,l.semver)){return false}}}return true}exports.prerelease=prerelease;function prerelease(a,c){var b=parse(a,c);return(b&&b.prerelease.length)?b.prerelease:null};