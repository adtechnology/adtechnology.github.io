module.exports=ProxyReader;var Reader=require("./reader.js");var getType=require("./get-type.js");var inherits=require("inherits");var fs=require("graceful-fs");inherits(ProxyReader,Reader);function ProxyReader(b){var a=this;if(!(a instanceof ProxyReader)){throw new Error("ProxyReader must be called as constructor.")}a.props=b;a._buffer=[];a.ready=false;Reader.call(a,b)}ProxyReader.prototype._stat=function(){var a=this;var c=a.props;var b=c.follow?"stat":"lstat";fs[b](c.path,function(f,e){var d;if(f||!e){d="File"}else{d=getType(e)}c[d]=true;c.type=a.type=d;a._old=e;a._addProxy(Reader(c,e))})};ProxyReader.prototype._addProxy=function(c){var a=this;if(a._proxyTarget){return a.error("proxy already set")}a._proxyTarget=c;c._proxy=a;["error","data","end","close","linkpath","entry","entryEnd","child","childEnd","warn","stat"].forEach(function(d){c.on(d,a.emit.bind(a,d))});a.emit("proxy",c);c.on("ready",function(){a.ready=true;a.emit("ready")});var b=a._buffer;a._buffer.length=0;b.forEach(function(d){c[d[0]].apply(c,d[1])})};ProxyReader.prototype.pause=function(){return this._proxyTarget?this._proxyTarget.pause():false};ProxyReader.prototype.resume=function(){return this._proxyTarget?this._proxyTarget.resume():false};