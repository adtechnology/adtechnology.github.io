var Hack=require("./hack");var Marker=require("../tokenizer/marker");var ASTERISK_HACK="*";var BACKSLASH_HACK="\\";var IMPORTANT_TOKEN="!important";var UNDERSCORE_HACK="_";var BANG_HACK="!ie";function restoreFromOptimizing(c,a){var e;var d;var f;var b;for(b=c.length-1;b>=0;b--){e=c[b];if(e.unused){continue}if(!e.dirty&&!e.important&&!e.hack){continue}if(a){d=a(e);e.value=d}else{d=e.value}if(e.important){restoreImportant(e)}if(e.hack){restoreHack(e)}if("all" in e){f=e.all[e.position];f[1][1]=e.name;f.splice(2,f.length-1);Array.prototype.push.apply(f,d)}}}function restoreImportant(a){a.value[a.value.length-1][1]+=IMPORTANT_TOKEN}function restoreHack(a){if(a.hack[0]==Hack.UNDERSCORE){a.name=UNDERSCORE_HACK+a.name}else{if(a.hack[0]==Hack.ASTERISK){a.name=ASTERISK_HACK+a.name}else{if(a.hack[0]==Hack.BACKSLASH){a.value[a.value.length-1][1]+=BACKSLASH_HACK+a.hack[1]}else{if(a.hack[0]==Hack.BANG){a.value[a.value.length-1][1]+=Marker.SPACE+BANG_HACK}}}}}module.exports=restoreFromOptimizing;