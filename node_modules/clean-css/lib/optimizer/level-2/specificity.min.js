var Marker=require("../../tokenizer/marker");var Selector={ADJACENT_SIBLING:"+",DESCENDANT:">",DOT:".",HASH:"#",NON_ADJACENT_SIBLING:"~",PSEUDO:":"};var LETTER_PATTERN=/[a-zA-Z]/;var NOT_PREFIX=":not(";var SEPARATOR_PATTERN=/[\s,\(>~\+]/;function specificity(f){var n=[0,0,0];var h;var j;var d;var c;var a=0;var b;var k=false;var m=false;var g,e;for(g=0,e=f.length;g<e;g++){h=f[g];if(j){}else{if(h==Marker.SINGLE_QUOTE&&!c&&!d){d=true}else{if(h==Marker.SINGLE_QUOTE&&!c&&d){d=false}else{if(h==Marker.DOUBLE_QUOTE&&!c&&!d){c=true}else{if(h==Marker.DOUBLE_QUOTE&&c&&!d){c=false}else{if(d||c){continue}else{if(a>0&&!k){}else{if(h==Marker.OPEN_ROUND_BRACKET){a++}else{if(h==Marker.CLOSE_ROUND_BRACKET&&a==1){a--;k=false}else{if(h==Marker.CLOSE_ROUND_BRACKET){a--}else{if(h==Selector.HASH){n[0]++}else{if(h==Selector.DOT||h==Marker.OPEN_SQUARE_BRACKET){n[1]++}else{if(h==Selector.PSEUDO&&!m&&!isNotPseudoClass(f,g)){n[1]++;k=false}else{if(h==Selector.PSEUDO){k=true}else{if((g===0||b)&&LETTER_PATTERN.test(h)){n[2]++}}}}}}}}}}}}}}}j=h==Marker.BACK_SLASH;m=h==Selector.PSEUDO;b=!j&&SEPARATOR_PATTERN.test(h)}return n}function isNotPseudoClass(a,b){return a.indexOf(NOT_PREFIX,b)===b}module.exports=specificity;