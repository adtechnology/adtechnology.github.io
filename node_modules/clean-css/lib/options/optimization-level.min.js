var roundingPrecisionFrom=require("./rounding-precision").roundingPrecisionFrom;var override=require("../utils/override");var OptimizationLevel={Zero:"0",One:"1",Two:"2"};var DEFAULTS={};DEFAULTS[OptimizationLevel.Zero]={};DEFAULTS[OptimizationLevel.One]={cleanupCharsets:true,normalizeUrls:true,optimizeBackground:true,optimizeBorderRadius:true,optimizeFilter:true,optimizeFontWeight:true,optimizeOutline:true,removeEmpty:true,removeNegativePaddings:true,removeQuotes:true,removeWhitespace:true,replaceMultipleZeros:true,replaceTimeUnits:true,replaceZeroUnits:true,roundingPrecision:roundingPrecisionFrom(undefined),selectorsSortingMethod:"standard",specialComments:"all",tidyAtRules:true,tidyBlockScopes:true,tidySelectors:true,transform:noop};DEFAULTS[OptimizationLevel.Two]={mergeAdjacentRules:true,mergeIntoShorthands:true,mergeMedia:true,mergeNonAdjacentRules:true,mergeSemantically:false,overrideProperties:true,removeEmpty:true,reduceNonAdjacentRules:true,removeDuplicateFontRules:true,removeDuplicateMediaBlocks:true,removeDuplicateRules:true,removeUnusedAtRules:false,restructureRules:false,skipProperties:[]};var ALL_KEYWORD_1="*";var ALL_KEYWORD_2="all";var FALSE_KEYWORD_1="false";var FALSE_KEYWORD_2="off";var TRUE_KEYWORD_1="true";var TRUE_KEYWORD_2="on";var LIST_VALUE_SEPARATOR=",";var OPTION_SEPARATOR=";";var OPTION_VALUE_SEPARATOR=":";function noop(){}function optimizationLevelFrom(c){var e=override(DEFAULTS,{});var b=OptimizationLevel.Zero;var a=OptimizationLevel.One;var d=OptimizationLevel.Two;if(undefined===c){delete e[d];return e}if(typeof c=="string"){c=parseInt(c)}if(typeof c=="number"&&c===parseInt(d)){return e}if(typeof c=="number"&&c===parseInt(a)){delete e[d];return e}if(typeof c=="number"&&c===parseInt(b)){delete e[d];delete e[a];return e}if(typeof c=="object"){c=covertValuesToHashes(c)}if(a in c&&"roundingPrecision" in c[a]){c[a].roundingPrecision=roundingPrecisionFrom(c[a].roundingPrecision)}if(d in c&&"skipProperties" in c[d]&&typeof(c[d].skipProperties)=="string"){c[d].skipProperties=c[d].skipProperties.split(LIST_VALUE_SEPARATOR)}if(b in c||a in c||d in c){e[b]=override(e[b],c[b])}if(a in c&&ALL_KEYWORD_1 in c[a]){e[a]=override(e[a],defaults(a,normalizeValue(c[a][ALL_KEYWORD_1])));delete c[a][ALL_KEYWORD_1]}if(a in c&&ALL_KEYWORD_2 in c[a]){e[a]=override(e[a],defaults(a,normalizeValue(c[a][ALL_KEYWORD_2])));delete c[a][ALL_KEYWORD_2]}if(a in c||d in c){e[a]=override(e[a],c[a])}else{delete e[a]}if(d in c&&ALL_KEYWORD_1 in c[d]){e[d]=override(e[d],defaults(d,normalizeValue(c[d][ALL_KEYWORD_1])));delete c[d][ALL_KEYWORD_1]}if(d in c&&ALL_KEYWORD_2 in c[d]){e[d]=override(e[d],defaults(d,normalizeValue(c[d][ALL_KEYWORD_2])));delete c[d][ALL_KEYWORD_2]}if(d in c){e[d]=override(e[d],c[d])}else{delete e[d]}return e}function defaults(d,c){var a=override(DEFAULTS[d],{});var b;for(b in a){if(typeof a[b]=="boolean"){a[b]=c}}return a}function normalizeValue(a){switch(a){case FALSE_KEYWORD_1:case FALSE_KEYWORD_2:return false;case TRUE_KEYWORD_1:case TRUE_KEYWORD_2:return true;default:return a}}function covertValuesToHashes(b){var d=override(b,{});var c;var a;for(a=0;a<=2;a++){c=""+a;if(c in d&&(d[c]===undefined||d[c]===false)){delete d[c]}if(c in d&&d[c]===true){d[c]={}}if(c in d&&typeof d[c]=="string"){d[c]=covertToHash(d[c],c)}}return d}function covertToHash(a,b){return a.split(OPTION_SEPARATOR).reduce(function(c,h){var g=h.split(OPTION_VALUE_SEPARATOR);var d=g[0];var f=g[1];var e=normalizeValue(f);if(ALL_KEYWORD_1==d||ALL_KEYWORD_2==d){c=override(c,defaults(b,e))}else{c[d]=e}return c},{})}module.exports={OptimizationLevel:OptimizationLevel,optimizationLevelFrom:optimizationLevelFrom};