var util=require("./util");var has=Object.prototype.hasOwnProperty;var hasNativeMap=typeof Map!=="undefined";function ArraySet(){this._array=[];this._set=hasNativeMap?new Map():Object.create(null)}ArraySet.fromArray=function ArraySet_fromArray(d,b){var e=new ArraySet();for(var c=0,a=d.length;c<a;c++){e.add(d[c],b)}return e};ArraySet.prototype.size=function ArraySet_size(){return hasNativeMap?this._set.size:Object.getOwnPropertyNames(this._set).length};ArraySet.prototype.add=function ArraySet_add(b,e){var d=hasNativeMap?b:util.toSetString(b);var c=hasNativeMap?this.has(b):has.call(this._set,d);var a=this._array.length;if(!c||e){this._array.push(b)}if(!c){if(hasNativeMap){this._set.set(b,a)}else{this._set[d]=a}}};ArraySet.prototype.has=function ArraySet_has(a){if(hasNativeMap){return this._set.has(a)}else{var b=util.toSetString(a);return has.call(this._set,b)}};ArraySet.prototype.indexOf=function ArraySet_indexOf(b){if(hasNativeMap){var a=this._set.get(b);if(a>=0){return a}}else{var c=util.toSetString(b);if(has.call(this._set,c)){return this._set[c]}}throw new Error('"'+b+'" is not in the set.')};ArraySet.prototype.at=function ArraySet_at(a){if(a>=0&&a<this._array.length){return this._array[a]}throw new Error("No element indexed by "+a)};ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()};exports.ArraySet=ArraySet;